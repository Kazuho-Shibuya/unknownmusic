<% provide(:title, '編集') %>
<div class="edit-img">
  <div id="wrapper" class="container-edit">
    <%= render 'layouts/header' %>
    <div class="row justify-content-center">
      <div class="col-md-6">
        <p class="eng-title text-center">User edit</p>
        <h1 class="jpn-title text-center">ユーザ編集</h1>
        <div class="field text-center">
          <%= form_for(@user, url: edit_user_path) do |f| %>
            <%= render 'shared/error_messages', object: f.object %>
            <div class="img-edit">
              <p>
                <% if @user_image.nil? %>
                  <%= image_tag @user.image.to_s, id: "img-prev", class: "img-fluid rounded-circle user-img" %>
                <% else %>
                  <%= image_tag @user_image, id: "img-prev", class: "img-fluid rounded-circle user-img" %>
                <% end %>
                <%= f.hidden_field :user_image, :value => @user.image.to_s %>
              </p>
              <p class="m-0">
                <label class="img-change mx-auto">
                  <i class="far fa-image"></i>
                  <span>
                    画像を変更
                  </span>
                  <%= f.file_field :image, id: "post-img" %>
                </label>
              </p>
              <% if f.object.errors.include?(:image) %>
                <p class="alert alert-danger error mx-auto text-left"><%= f.object.errors.full_messages_for(:image).first %></p>
              <% end %>
            </div>
            <div class="user-edit">
              <%= f.text_field :name, class: 'edit-form', placeholder: '名前' %>
              <% if f.object.errors.include?(:name) %>
                <p class="alert alert-danger error mx-auto text-left"><%= f.object.errors.full_messages_for(:name).first %></p>
              <% end %>
              <%= f.email_field :email, class: 'edit-form', placeholder: 'メールアドレス' %>
              <% if f.object.errors.include?(:email) %>
                <p class="alert alert-danger error mx-auto text-left"><%= f.object.errors.full_messages_for(:email).first %></p>
              <% end %>
              <%= f.password_field :password, class: 'edit-form', placeholder: 'パスワード' %>
              <% if f.object.errors.include?(:password) %>
                <p class="alert alert-danger error mx-auto text-left"><%= f.object.errors.full_messages_for(:password).first %></p>
              <% end %>
              <%= f.password_field :password_confirmation, class: 'edit-form', placeholder: 'パスワード（確認）' %>
              <% if f.object.errors.include?(:password_confirmation) %>
                <p class="alert alert-danger error mx-auto text-left"><%= f.object.errors.full_messages_for(:password_confirmation).first %></p>
              <% end %>
              <p>
                <%= f.submit '更新する', class: 'btn-style btn-edit'%>
              </p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <%= render 'layouts/footer' %>
  </div>
</div>
